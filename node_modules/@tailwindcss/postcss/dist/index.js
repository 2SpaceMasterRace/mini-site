"use strict";var B=Object.create;var C=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var I=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty;var L=(e,i,t,o)=>{if(i&&typeof i=="object"||typeof i=="function")for(let n of F(i))!q.call(e,n)&&n!==t&&C(e,n,{get:()=>i[n],enumerable:!(o=D(i,n))||o.enumerable});return e};var g=(e,i,t)=>(t=e!=null?B(I(e)):{},L(i||!e||!e.__esModule?C(t,"default",{value:e,enumerable:!0}):t,e));var W=require("@tailwindcss/node"),O=require("@tailwindcss/node/require-cache"),M=require("@tailwindcss/oxide"),V=g(require("fs"));var h=g(require("path"),1);function _(e,i){if(typeof e!="string")throw new TypeError("expected path to be a string");if(e==="\\"||e==="/")return"/";var t=e.length;if(t<=1)return e;var o="";if(t>4&&e[3]==="\\"){var n=e[2];(n==="?"||n===".")&&e.slice(0,2)==="\\\\"&&(e=e.slice(2),o="//")}var r=e.split(/[/\\]+/);return i!==!1&&r[r.length-1]===""&&r.pop(),o+r.join("/")}function S(e){let i=_(e);return e.startsWith("\\\\")&&i.startsWith("/")&&!i.startsWith("//")?`/${i}`:i}var x="'",R='"';function z(){let e=new WeakSet;function i(t){let o=t.root().source?.input.file;if(!o)return;let n=t.source?.input.file;if(!n||e.has(t))return;let r=t.params[0],c=r[0]===R&&r[r.length-1]===R?R:r[0]===x&&r[r.length-1]===x?x:null;if(!c)return;let l=t.params.slice(1,-1),f="";if(l.startsWith("!")&&(l=l.slice(1),f="!"),!l.startsWith("./")&&!l.startsWith("../"))return;let s=h.default.posix.join(S(h.default.dirname(n)),l),m=h.default.posix.dirname(S(o)),u=h.default.posix.relative(m,s);u.startsWith(".")||(u="./"+u),t.params=c+f+u+c,e.add(t)}return{postcssPlugin:"tailwindcss-postcss-fix-relative-paths",AtRule:{source:i,plugin:i,config:i}}}var b=require("lightningcss"),y=g(require("path")),E=g(require("postcss")),j=g(require("postcss-import")),T=class extends Map{constructor(t){super();this.factory=t}get(t){let o=super.get(t);return o===void 0&&(o=this.factory(t,this),this.set(t,o)),o}};function $(e={}){let i=e.base??process.cwd(),t=e.optimize??process.env.NODE_ENV==="production",o=new T(()=>({mtimes:new Map,compiler:null,css:"",optimizedCss:"",fullRebuildPaths:[]})),n,r;return{postcssPlugin:"@tailwindcss/postcss",plugins:[(0,j.default)(),z(),{postcssPlugin:"tailwindcss",Once(){n=!1,r=!1},AtRule(c){c.name==="apply"?n=!0:c.name==="tailwind"&&(n=!0,r=!0)},async OnceExit(c,{result:l}){let f=l.opts.from??"",s=o.get(f),m=y.default.dirname(y.default.resolve(f));async function u(){return(0,O.clearRequireCache)(s.fullRebuildPaths),s.fullRebuildPaths=[],(0,W.compile)(c.toString(),{base:m,onDependency:p=>{s.fullRebuildPaths.push(p)}})}s.compiler??=await u();let w="incremental";{for(let a of s.fullRebuildPaths)l.messages.push({type:"dependency",plugin:"@tailwindcss/postcss",file:a,parent:l.opts.from});let p=l.messages.flatMap(a=>a.type!=="dependency"?[]:a.file);p.push(f);for(let a of p){let v=V.default.statSync(a,{throwIfNoEntry:!1})?.mtimeMs??null;if(v===null){a===f&&(w="full");continue}s.mtimes.get(a)!==v&&(w="full",s.mtimes.set(a,v))}}if(!r&&!n)return;let d="",P=new M.Scanner({detectSources:{base:i},sources:s.compiler.globs.map(({origin:p,pattern:a})=>({base:p?y.default.dirname(y.default.resolve(m,p)):m,pattern:a}))}),A=P.scan();for(let p of P.files)l.messages.push({type:"dependency",plugin:"@tailwindcss/postcss",file:p,parent:l.opts.from});for(let{base:p,pattern:a}of P.globs)l.messages.push({type:"dir-dependency",plugin:"@tailwindcss/postcss",dir:p,glob:a,parent:l.opts.from});w==="full"?(s.compiler=await u(),d=s.compiler.build(r?A:[])):w==="incremental"&&(d=s.compiler.build(A)),d!==s.css&&t&&(s.optimizedCss=k(d,{minify:typeof t=="object"?t.minify:!0})),s.css=d,c.removeAll(),c.append(E.default.parse(t?s.optimizedCss:s.css,l.opts))}}]}}function k(e,{file:i="input.css",minify:t=!1}={}){return(0,b.transform)({filename:i,code:Buffer.from(e),minify:t,sourceMap:!1,drafts:{customMedia:!0},nonStandard:{deepSelectorCombinator:!0},include:b.Features.Nesting,exclude:b.Features.LogicalProperties,targets:{safari:16<<16|1024},errorRecovery:!0}).code.toString()}var N=Object.assign($,{postcss:!0});module.exports=N;
